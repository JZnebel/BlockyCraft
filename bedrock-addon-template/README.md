# Bedrock Add-on Template

This is the template used by BlocklyCraft to generate Minecraft Bedrock Edition behavior packs.

## Structure

```
bedrock-addon-template/
├── pack_icon.png                     # Optional pack icon (auto-generated if missing)
└── README.md                         # This file
```

## How It Works

1. **BlocklyCraft frontend** generates Bedrock-compatible JavaScript code using `generators/bedrock.js`
2. **deploy_bedrock_api.py** copies this template to `/tmp/bedrock-addon-build`
3. The API generates all necessary files:
   - `manifest.json` - Add-on manifest with UUIDs
   - `scripts/main.js` - JavaScript code using @minecraft/server API
   - `functions/*.mcfunction` - Command files
   - `entities/` - Custom entity definitions (TODO)
   - `items/` - Custom item definitions (TODO)
4. Everything is packaged as a `.mcpack` file (ZIP format)
5. The `.mcpack` is deployed to the configured Bedrock packs folder

## Generated Files

### manifest.json
Auto-generated with unique UUIDs for each addon:
```json
{
  "format_version": 2,
  "header": {
    "name": "Your Addon Name",
    "description": "Generated by BlocklyCraft",
    "uuid": "unique-uuid-here",
    "version": [1, 0, 0],
    "min_engine_version": [1, 21, 0]
  },
  "modules": [
    {
      "type": "data",
      "uuid": "unique-module-uuid",
      "version": [1, 0, 0]
    },
    {
      "type": "script",
      "language": "javascript",
      "uuid": "unique-script-uuid",
      "entry": "scripts/main.js",
      "version": [1, 0, 0]
    }
  ],
  "dependencies": [
    {
      "module_name": "@minecraft/server",
      "version": "1.9.0-beta"
    }
  ]
}
```

### scripts/main.js
Generated from Blockly blocks:
```javascript
import { world, system } from "@minecraft/server";

// Command: /hello
world.beforeEvents.chatSend.subscribe((event) => {
    if (event.message.toLowerCase() === '/hello') {
        event.cancel = true;
        const player = event.sender;
        player.sendMessage("Hello from BlocklyCraft!");
    }
});

// Event Listeners
world.beforeEvents.playerBreakBlock.subscribe((event) => {
    const player = event.player;
    const block = event.block;
    // Generated action code here
});
```

### functions/*.mcfunction
Command files for each custom command:
```mcfunction
# Command: /teleport_spawn
tp @s 0 100 0
say Welcome to spawn!
```

## Bedrock API Features

Bedrock add-ons use the **@minecraft/server** JavaScript API (version 1.9.0-beta):

### Supported Features:
- ✅ Commands (via chat event listeners)
- ✅ Event listeners (block break, item use, etc.)
- ✅ Player actions (sendMessage, teleport, addEffect, etc.)
- ✅ World manipulation (setBlock, spawnEntity, createExplosion)
- ✅ Item/inventory management (via commands)
- ✅ Logic/Math/Text blocks

### API Limitations:
- ❌ Custom items (requires JSON resource pack - TODO)
- ❌ Custom mobs (requires JSON entity definitions - TODO)
- ❌ Custom textures (requires resource pack - TODO)
- ❌ AI block display models (Java Edition only)

## No Compilation Needed

Unlike Fabric/Bukkit which require Java compilation, Bedrock add-ons are:
- Pure JavaScript + JSON
- No build step required
- Just package files into a ZIP with `.mcpack` extension
- Minecraft imports them directly

## Installation

### On Device:
1. Copy the `.mcpack` file to your device
2. Open it with Minecraft Bedrock
3. It will be imported automatically
4. Enable it in World Settings → Behavior Packs

### File Locations:
- **Windows**: `%LOCALAPPDATA%\Packages\Microsoft.MinecraftUWP_8wekyb3d8bbwe\LocalState\games\com.mojang\behavior_packs`
- **Android**: `/storage/emulated/0/games/com.mojang/behavior_packs`
- **iOS**: (via Files app) `Minecraft/games/com.mojang/behavior_packs`

## Platform Compatibility

Bedrock add-ons work on:
- ✅ Windows 10/11 (Bedrock Edition)
- ✅ Xbox
- ✅ PlayStation
- ✅ Nintendo Switch
- ✅ iOS
- ✅ Android

**Does NOT work on**:
- ❌ Java Edition (use Fabric or Bukkit instead)

## Debugging

Enable content logging in Bedrock settings to see console.log() output from your scripts.

## Future Enhancements

- Custom entity definitions (JSON-based)
- Custom item definitions (JSON-based)
- Resource pack integration (textures, sounds)
- Particle effects
- Custom blocks (experimental)

## References

- [Bedrock Add-ons Documentation](https://learn.microsoft.com/en-us/minecraft/creator/)
- [@minecraft/server API Reference](https://learn.microsoft.com/en-us/minecraft/creator/scriptapi/minecraft/server/minecraft-server)
- [.mcpack Format Specification](https://wiki.bedrock.dev/guide/project-setup.html)
